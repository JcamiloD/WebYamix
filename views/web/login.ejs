<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>YAMIX</title>
  <link rel="stylesheet" href="css/login.css">

</head>

<body>
  <!-- partial:index.partial.html -->
  <section id="login">
    <div class="form-box">
      <div class="form-value">
        <form  id="restablecerForm" action="/logueo" method="post" onsubmit="validarFormulario(event)">
          <h2>Login</h2>
          <div class="inputbox">
              <ion-icon name="mail-outline"></ion-icon>
              <input id="correo" name="correo" type="email" >
              <label for="">Correo</label>
          </div>
          <div class="inputbox"id="confirmarContraseñaBox">
            <ion-icon name="eye-off-outline" class="show-password" onclick="togglePassword('contraseña', this)"></ion-icon>
              <input id="contraseña" name="contraseña" type="password" >
              <label for="confirmarContraseña">Contraseña</label>
          </div>

        
            
     
          <div class="forget">
              <label>
                  <input name="rememberMe" type="checkbox"> Recuérdame
              </label>
              <label>
                  <a href="/recuperar">¿Olvidaste la contraseña?</a>
              </label>
          </div>
          <button> Iniciar Sesión </button>
          <div class="register">
              <p>¿No tienes cuenta? <a href="/register">Regístrate</a></p>
          </div>
      </form>      
      </div>
    </div>
  </section>
  <!-- partial -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src='https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js'></script>
  <script src='https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js'></script>
  <script>

        

    async function validarFormulario(event) {
        event.preventDefault();
        const contraseña = document.getElementById('contraseña').value; 
        const correo = document.getElementById('correo').value.trim();


        if (!correo || !contraseña) {
          Swal.fire({
              icon: 'error',
              title: 'Error',
              text: 'Todos los campos son necesarios.'
          });
          return;
      }


       
        // Envía el formulario después de que se cierre la alerta
        document.getElementById('restablecerForm').submit();
    }

    function togglePassword(inputId, icon) {
        const input = document.getElementById(inputId);
        if (input.type === "password") {
            input.type = "text";
            icon.name = "eye-outline";
        } else {
            input.type = "password";
            icon.name = "eye-off-outline";
        }
    }
</script>

  <script>
  <% if (typeof alert !== 'undefined') { %>
      Swal.fire({
        icon: '<%= alertType %>',
        title: '<%= alertType === "success" ? "¡Éxito!" : "¡Error!" %>',
        text: '<%= alert %>',
        confirmButtonText: 'Aceptar'
      }).then(() => {
        window.location = '/<%= ruta %>';  // Redirige después de cerrar la alerta
      });
  <% } %>
  </script>
</body>

</html>